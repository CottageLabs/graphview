<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
    <meta charset="utf-8">
    <title>GraphView</title>
    <meta name="description" content="GraphView">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- get jquery -->
    <script type="text/javascript" src="vendor/jquery/1.7.1/jquery-1.7.1.min.js"></script>

    <!-- get bootstrap js and css -->
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap-responsive.min.css">
    <script type="text/javascript" src="vendor/bootstrap/js/bootstrap.min.js"></script>  

    <!-- get jquery-ui js and css -->
    <link rel="stylesheet" href="vendor/jquery-ui-1.8.18.custom/jquery-ui-1.8.18.custom.css">
    <script type="text/javascript" src="vendor/jquery-ui-1.8.18.custom/jquery-ui-1.8.18.custom.min.js"></script>
                
    <!-- get select2-->
    <link rel="stylesheet" href="vendor/select2-release-3.2/select2.css">
    <script type="text/javascript" src="vendor/select2-release-3.2/select2.min.js"></script>

    <!-- get d3 -->
    <script type="text/javascript" src="vendor/d3/d3.min.js"></script>

    <!-- get graphview and launch -->
    <script type="text/javascript" src="jquery.graphview2.js"></script>
    <!--<link rel="stylesheet" href="graphview.css"> there isnt any graphview css yet -->
    <script type="text/javascript">
    jQuery(document).ready(function($) {
        $('#graph').css({"height":$(window).height() - 5});
        $('#graph').graphview({
            "target": 'http://test.cottagelabs.com:9200/gtr/project/_search',
            "pushstate": false,
            "defaultquery": {
                "query": {
                    "bool": {
                        "must":[]
                    }
                },
                "from":0,
                "size":100,
                "fields":[
                    "projectComposition.leadResearchOrganisation.name.exact",
                    'projectComposition.collaborator.name.exact',
                    'projectComposition.organisation.name.exact',
                    "projectComposition.projectPerson.name.exact",
                    "projectComposition.project.status.exact",
                    "projectComposition.project.output.researchMaterialOutput.impact.exact",
                    "projectComposition.project.output.productOutput.impact.exact",
                    "projectComposition.project.title.exact",
                    "projectComposition.project.grantReference.exact",
                    "projectComposition.project.grantCategory.exact",
                    'projectComposition.project.publication.title.exact',
                    'date'
                ],
                "facets":{
                    "leads": {"term":{"field":"projectComposition.leadResearchOrganisation.name.exact","suggest": true}},
                    "collaborators": {"term":{'field':'projectComposition.collaborator.name.exact', "node": true, "suggest": true}},
                    "orgs": {"term":{'field':'projectComposition.organisation.name.exact',"node": true, "suggest": true}},
                    "people": {"term":{"field":"projectComposition.projectPerson.name.exact","node": true, "suggest": true}},
                    "status": {"term":{"field":"projectComposition.project.status.exact","suggest": true}},
                    "research impact": {"term":{"field":"projectComposition.project.output.researchMaterialOutput.impact.exact","node":true, "suggest": true}},
                    "product impact": {"term":{"field":"projectComposition.project.output.productOutput.impact.exact","node":true, "suggest": true}},
                    "title": {"term":{"field":"projectComposition.project.title.exact","suggest": true}},
                    "ref": {"term":{"field":"projectComposition.project.grantReference.exact","suggest": true}},
                    "category": {"term":{"field":"projectComposition.project.grantCategory.exact","suggest": true}},
                    "publication": {"term":{'field':'projectComposition.project.publication.title.exact', "suggest": false, "node": true}},
                    "range": {"date_histogram": {"interval": "month", "field": "date"}}
                }
            },
            "nodesize": 100
        });
    });
    </script>

</head>

<body>

<div id="graph" style="width:100%;"></div>

</body>
</html>
